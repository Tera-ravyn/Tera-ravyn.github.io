---
title: turf.js绘制矢量箭头
tags:
  - turf
  - GIS
  - 前端
categories: 技术
---

最近业务上接到了这么个需求。场景是maplibre的地图服务，是支持三维视角的，这意味着`icon`和`line`这种独立于地图视角的图层都是不适用的，需要基于地理信息绘制一个真实的箭头。

箭头的绘制分为身体与头两部分。
身体部分基于折线和曲线绘制的基础，创建一个缓冲区从而获得一个`Polygon`。缓冲区在线的两端将生成圆头，如果需要其他的样式可以使用`difference`进行裁剪。
头部的三角也是相同，将圆头裁剪后换为三角形。如何裁剪取决于你想要箭头相对于你结束绘制时的位置（三角顶端刚好停留在指定坐标，或者是三角的中心停留在指定坐标，等等）
以下以“三角顶端刚好停留在指定坐标”的情况为例进行裁剪。

