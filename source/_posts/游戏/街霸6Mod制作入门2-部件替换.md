---
title: 街霸6Mod制作入门2-部件替换
categories: 游戏
tags: 
date: 2025-02-12 16:15:28
updated: 2025-02-12 16:15:28
cover:
---
## 前言

这系列文章并不是很正式的教程，而更接近于一个备忘。主要内容都参考自 Remy 2 Fang 的 Mod 制作导论。笔者对建模基本也是 0 基础，一切都是学习备忘。在实践中如果遇到某些问题，请查看附录，也许有你要的答案。

## 一、适配模型

首先，不要轻易删除原模型里的任何部件，除非你做的就是简单的移除某些衣服的 Mod，因为你在之后的任意一步里都可能会用到这些部分。编辑的时候如果不想看到某些部分，隐藏掉它们就好。

导入你需要的素材后，对照着原模型进行适配，这一步基本上都是建模需要的知识。以下为新手介绍几个简单快速的编辑方式以及入门的操作：

### 1. 适配衣裤与四肢

衣服和裤子也有自己的静置姿态，当静置姿态与模型本身不符的时候，应该调整衣服和裤子的骨架。

以下述的裤子为例，模型是取用的环球游历中的模型 `wcs004_001_010_m00` 。

1. 选中 `Armature` ，也就是模型的骨架，切换到 `姿态模式` 。打开骨架链，从 `Root` 往下展开，找到四肢旋转的父节点，在例子中也就是大腿节点 `L_Thigh` 和 `R_Thigh`。在大纲中选择要调整的节点，在视图左侧选择操作。
2. 旋转对齐并缩放到合适大小后，需要把当前的姿态设置为新的静置姿态。选中网格体，打开 `修改器` ，直接应用当前修改器，然后切换到 `数据` 选项卡，删除所有顶点组。之后再重新选中 `Armature` ，在姿态模式下就可以设置**姿态-应用-将当前姿态应用为静置姿态**。

### 2. 细节调整

可以根据个人喜好，选择在骨架中选择不同的节点微调某部分的比例变形，或者是使用雕刻直接上手。我个人比较喜欢先通过比例变形调整各部分位置基本合适，再用雕刻的平滑工具处理一些形变过分的网格。

## 二、转移权重

转移权重之前，需要先清理掉被转移对象的所有顶点组，因为之后我们转移权重的时候，将全面用原模型的顶点组进行覆盖。有些模型在上一步调整过程中已经完成了清理，但进行下去之前还是别忘了再确认一下。

完成准备工作之后，在视图中先选中要转移权重的对象（原模型），再按住 <kbd>Shift</kbd> 选择要被转移权重的对象（新模型），随后将模式切换到 `权重绘制` 。接下来按照以下步骤操作：

1. **将 `传输网格数据` 中的 `选择来源层` 设置为 `按名称`**
+ 确保权重转移时，Blender 根据顶点组的名称匹配原模型和新模型的顶点组。实际上对于没有顶点组的新模型，就是把原模型的整套顶点组搬过来的意思，主要原因就是为了和原模型保持一致。
2. **选择 `权重-清理` ， `子集`  设为 `所有组` ，`限制` 设为 0.01**
+ 清理权重数据，移除对顶点影响极小的骨骼权重（小于 0.01），以优化权重分布。
3. **选择 `权重-平滑` ， `子集` 设为 `所有组` ，`迭代次数` 设为 5**
+ 平滑权重分布，使骨骼过渡更加自然。5 是一个比较常见的迭代次数。迭代次数越高，平滑效果越明显，但过高的次数可能导致权重失真。
4. **选择 `权重-全部规格化`** 
+ 确保每个顶点的所有权重值总和为 1，避免权重冲突。
5. **选择 `权重-总限制` ，设为 6**
+ 限制每个顶点受影响的骨骼数量，优化性能。一般会选 4~6 之间的某个值。

完成这一套流程后，你可以通过查看不同顶点组时权重颜色是否变化来确认权重是否被成功转移。

[查看方式 1：在大纲里选中不同的网格下属顶点组]

[查看方式 2：选中数据选项卡里的顶点组]

## 三、替换原模型

完成权重转移后，回到 `物体模式` ，接下来我们需要完成新模型对旧模型网格的李代桃僵。在视图中先选中新模型，再按住 <kbd>Shift</kbd> 选择旧模型，将它们合并到一个网格中（快捷键：<kbd>Ctrl</kbd>+<kbd>J</kbd>），然后转到 `编辑模式` 。

首先取消选择所有顶点的默认状态（随便点击视图内的某处或者双击 <kbd>A</kbd>），切换到 `材质` 选项卡，可以看到两个不同的材质，它们分别属于新模型与旧模型。点击材质并点击 `选择` 按钮，就可以选中该材质对应的模型的所有顶点。

接下来选中旧模型的所有顶点并删除，再选中新模型所有顶点，选择旧模型的材质，并点击 `分配` 按钮，就可以将该材质插槽分配给新的模型了。

最后切回 `物体模式` ，选中新模型的材质，并点击右边的 <kbd>-</kbd> 按钮，删除这个材质，这样就完成了模型的替换。

在完成替换后，可以通过操作原模型的骨骼的方式来查看新模型是否正常跟随骨骼运动。

## 附录：Blender 操作问题

### 可能遇到的问题

**模式里没有姿态模式的选项？**

请先确保你目前选中的是 `Armature` 。

**选中骨骼之后能操作的只有一小部分？**

请在 `Armature` 下的 `姿态-Root` 中选择你需要的节点操作，以便父节点的操作能同时应用于子节点。

**找不到修改器/数据选项卡？**

请切换回物体模式，然后选中你正在编辑的**网格体**。

**<kbd>ctrl</kbd>+<kbd>J</kbd> 无效？**

首先确保你当前在物体模式，其次要确保其中至少有一个是激活物体，而且是后选的物体绑定到激活的物体上。也就是需要先在**视图**里选中原模型的物体（在大纲里选择也是无效的），然后<kbd>Shift</kbd>选中你要替换的新物体，再执行合并操作。

### 工作流程优化

**区分不同模型**：主要方便观察是否存在穿模之类的情况。点击模型，打开 `材质`  选项卡，下拉翻到 `视图显示` 属性，更改 `颜色` ，就可以更改视图中的显示着色。

### 快捷键表

#### 操作物体

1. 全选物体——A
2. 框选物体——B
3. 反选物体——Ctrl+I
4. 删除物体——X

#### 物体变形操作

1. <kbd>G</kbd>, <kbd>R</kbd>, <kbd>S</kbd> 分别对应模型的 Translate , Rotate , Scale ，长按后移动鼠标即可执行操作。鼠标左键确认当前操作，鼠标右键取消当前操作。
2. 在目前处于任一变形工具使用中的情况下，按住<kbd>X</kbd>, <kbd>Y</kbd>, <kbd>Z</kbd> 可以使变形只在该方向轴上进行。
3. 在进行坐标相关操作的时候，可以通过小键盘输入数字指定变化多少，回车确定。
4. 移动/旋转/缩放的时候，按住鼠标中键可以随时切换轴进行操作。
5. <kbd>Shift</kbd> + <kbd>X</kbd>/<kbd>Y</kbd>/<kbd>Z</kbd> 可以去掉该轴，只在另外两个轴构成的平面上移动。

#### 切换模式

1. <kbd>Tab</kbd> 在 `物体模式` 和 `编辑模式` 之间切换。
2. <kbd>Ctrl</kbd>+<kbd>Tab</kbd> 在所有模式里切换。